@if (navService.showNav$ | async) {
  <div class="nav-wrapper">
    <nav class="nav-header">
      <div class="nav-left">
        <button class="hamburger" (click)="toggleMobileMenu()">
          &#9776;
        </button>

        <div class="nav-links desktop-only">
          @for (btn of navPageButtons(); track btn.title) {
            <a
              class="nav-link"
              (click)="buttonGroupService.handleButtonClick(btn, $event)"
              style="cursor: pointer"
            >
              @if (btn.icon) {
                <i class="{{ btn.icon }}"></i>
              }
              <span>{{ btn.title }}</span>
            </a>
          }
        </div>
      </div>

      <div class="nav-right">
        @if (notificationService.notificationsCount() > 0) {
          <span routerLink="/notifications" class="notification-badge clickable" [class]="severity()">
            {{ notificationService.notificationsCount() }}
          </span>
        }

        <div class="dropdown">
          @if (currentUser()) {
            <button class="account-toggle btn btn-secondary" (click)="toggleAccountDropdown()">
              {{ currentUser()?.name | titlecase }}
            </button>

            @if (isAccountDropdownOpen()) {
              <ul class="account-dropdown" @dropdownAnimation>
                @for (item of buttonGroupService.standAloneButtons({title: '', icon: '', buttons: navActionButtons()}); track item.title) {
                  <li>
                      <a
                        (click)="buttonGroupService.handleButtonClick(item, $event); isAccountDropdownOpen.set(false)"
                        style="cursor: pointer"
                      >
                        @if (item.icon) {
                          <i class="{{ item.icon }}"></i>
                        }
                        {{ item.title }}
                      </a>
                  </li>
                }
              </ul>
            }

          }
        </div>
      </div>
    </nav>

    @if (isMobileMenuOpen()) {
      <div class="mobile-drawer" @drawerAnimation #mobileDrawer>
        <div class="drawer-header">
          <button (click)="toggleMobileMenu()">âœ•</button>
        </div>
        <div class="drawer-links">
          @for (btn of navPageButtons(); track btn.title) {
            <a
              class="nav-link"
              (click)="buttonGroupService.handleButtonClick(btn, $event); toggleMobileMenu()"
              style="cursor: pointer"
            >
              @if (btn.icon) {
                <i class="{{ btn.icon }}"></i>
              }
              {{ btn.title }}
            </a>
          }
        </div>
      </div>
    }

  </div>
}
