<div class="mx-4 mx-md-5 mb-5" *transloco="let t; prefix: 'monitored-series'">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <form [formGroup]="filterForm">
      <input class="form-control" type="text" [placeholder]="t('filter')" formControlName="filterText">
    </form>
  </div>

  <app-paginator
    [pageLoader]="pageLoader()"
    (currentItems)="hasAny.set($event.length > 0)"
    [reloader]="pageReloader"
    [pageSize]="20"
    [noResultsKey]="null"
    [hideOnLoading]="true"
  >
    <ng-template #items let-series>
      @if (hasAny()) {
        <div class="series-grid">
          @for (item of series; track item.id) {
            <div class="series-card">
              <a [routerLink]="'/monitored-series-detail/' + item.id" class="series-link">
                <div class="series-cover-wrapper">
                  @if (item.coverUrl) {
                    <img [src]="item.coverUrl" [alt]="item.title" class="series-cover">
                  } @else {
                    <div class="series-cover-placeholder">
                      <i class="fa fa-book"></i>
                    </div>
                  }
                </div>

                <div class="series-info">
                  <h5 class="series-title" [title]="item.title">{{ item.title }}</h5>
                  @if (item.chapters && item.chapters.length > 0) {
                    <div class="series-stats">
                      <small class="text-muted">
                        <i class="fa fa-list me-1"></i>{{ item.chapters.length }} chapters
                      </small>
                    </div>
                  }
                  @if (nextReleaseDate(item); as releaseDate) {
                    <span>
                      {{t('next-release-date', {date: releaseDate | utcToLocalTime:'shortDate'})}}
                    </span>
                  }
                </div>
              </a>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="d-flex flex-column align-items-center text-center gap-3 text-muted">
            <div style="font-size: 3rem;">
              ðŸ“ºâœ¨
            </div>
            <h5 class="mb-1">
              {{t('empty.title')}}
            </h5>
            <p class="mb-0">
              {{t('empty.description')}}
            </p>
          </div>
        </div>
      }
    </ng-template>
  </app-paginator>
</div>
