<div class="mx-4 mx-md-5 mb-5" *transloco="let t; prefix: 'monitored-series'">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <form [formGroup]="filterForm">
      <input class="form-control" type="text" [placeholder]="t('filter')" formControlName="filterText">
    </form>
    <button class="btn btn-primary">
      <a routerLink="/series-search">
        <i class="fa fa-magnifying-glass"></i>
      </a>
    </button>
    <button class="btn btn-secondary" (click)="add()">
      <i class="fa fa-plus me-2"></i> {{ t('actions.add') }}
    </button>
  </div>

  <app-table
    [pageLoader]="pageLoader()"
    (currentItems)="hasAny.set($event.length > 0)"
    [trackByIdFunc]="trackBy"
    [reloader]="pageReloader"
    [pageSize]="10"
  >
    <ng-template #mobile let-series>
      <div class="card mobile-card">
        <div class="card-header">
          <span class="card-title">{{ series.title }}</span>
        </div>
        <div class="card-body">
          <div class="mb-2">
            <small class="text-muted">{{ t('providers') }}:</small>
            <span class="ms-2">
              @for (provider of series.providers; track provider) {
                <span class="badge bg-info me-1">{{ provider | providerName }}</span>
              }
            </span>
          </div>
          <div class="mb-2">
            <small class="text-muted">{{ t('base-dir') }}:</small>
            <span class="ms-2">{{ series.baseDir }}</span>
          </div>
        </div>
        <div class="card-footer">
          <div class="card-actions">
            <button
              type="button"
              class="btn btn-primary btn-small"
              [ngbTooltip]="t('actions.edit')"
              (click)="edit(series)"
            >
              <i class="fa fa-pencil"></i>
            </button>
            <button
              type="button"
              class="btn btn-danger btn-small"
              (click)="delete(series)"
              [ngbTooltip]="t('actions.delete')"
            >
              <i class="fa fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th class="table-header-cell">{{ t('title') }}</th>
        <th class="table-header-cell">{{ t('providers') }}</th>
        <th class="table-header-cell">{{ t('base-dir') }}</th>
        <th class="table-header-cell">{{ t('actions.label') }}</th>
      </tr>
    </ng-template>

    <ng-template #cell let-series>
      <td class="table-cell">
        {{ series.title }}
      </td>
      <td class="table-cell">
        @for (provider of series.providers; track provider) {
          <span class="badge bg-info me-1">{{ provider | providerName }}</span>
        }
      </td>
      <td class="table-cell">
        <code class="text-muted">{{ series.baseDir }}</code>
      </td>
      <td class="table-cell">
        <div class="d-flex flex-column flex-md-row gap-2 my-2 justify-content-center align-items-center">
          <button
            type="button"
            class="btn btn-primary btn-small"
            [ngbTooltip]="t('actions.edit')"
            (click)="edit(series)"
          >
            <i class="fa fa-pencil"></i>
          </button>
          <button
            type="button"
            class="btn btn-danger btn-small"
            (click)="delete(series)"
            [ngbTooltip]="t('actions.delete')"
          >
            <i class="fa fa-trash"></i>
          </button>
        </div>
      </td>
    </ng-template>

    <ng-template #empty>
      <tr>
        <td colspan="4" class="py-5">
          <div class="d-flex flex-column align-items-center text-center gap-3 text-muted">
            <div style="font-size: 3rem;">
              ðŸ“ºâœ¨
            </div>
            <h5 class="mb-1">
              {{t('empty.title')}}
            </h5>
            <p class="mb-0">
              {{t('empty.description')}}
            </p>
          </div>
        </td>
      </tr>
    </ng-template>
  </app-table>
</div>
